---
import BaseLayout from '../layouts/BaseLayout.astro';
---
<BaseLayout title="contacto | Editsandgo.">
  <section class="contacto">
    <div class="contacto-left">
      <h2>¬øTienes un libro entre manos? H√°blanos.</h2><br>
      <p>No hace falta que tengas todo claro. No importa si a√∫n dudas, si te falta algo, si no sabes ni por d√≥nde empezar.
      Cu√©ntanos en qu√© punto est√°s y te diremos qu√© necesitas.<br>
      Sin rodeos. Sin promesas vac√≠as. Sin presupuestos inflados. Nos escribes, te leemos y te respondemos como personas normales que trabajan en esto todos los d√≠as.
      <strong>Esto no es una multinacional. Es un equipo peque√±o que se deja la piel por cada autor.</strong></p><br>
      <p>üì© editsandgo@gmail.com<br>(Te leemos. De verdad. Nada de bots ni respuestas enlatadas.)</p><br>
      <p>O usa el formulario. Dinos qu√© tienes, qu√© te falta y qu√© quieres conseguir. <br><strong>Y empezamos. F√°cil y al grano.</strong></p>
    </div>

    <div class="contacto-right">
      <h2>Cu√©ntanos qu√© tienes entre manos.</h2>
      <p>Nada de formalidades. Escribe como si le contaras tu proyecto a una amiga.<br> Cuanto m√°s claro seas, mejor podemos ayudarte.</p>

      <form id="contacto-form" action="https://formsubmit.co/editsandgo@gmail.com" method="POST">
        <input type="hidden" name="_subject" value="Nuevo mensaje para Editsandgo ‚ú®">
        <input type="text" name="_honey" style="display:none">
        <input type="hidden" name="_captcha" value="false">

        <label for="nombre">Nombre:</label>
        <input type="text" id="nombre" name="nombre" required placeholder="¬øC√≥mo te llamas? (nos gusta saber con qui√©n hablamos)">

        <label for="email">Email:</label>
        <input type="email" id="email" name="email" required placeholder="Pon uno que leas">

        <label for="manuscrito">¬øTienes ya el manuscrito?</label>
        <select id="manuscrito" name="manuscrito" required>
          <option value="">Selecciona una opci√≥n</option>
          <option value="terminado">S√≠, terminado</option>
          <option value="casi">Casi, estoy en ello</option>
          <option value="no">No, pero tengo la idea</option>
          <option value="otro">Otro (cu√©ntanos abajo)</option>
        </select>

        <label for="servicio">¬øQu√© necesitas?</label>
        <select id="servicio" name="servicio" required>
          <option value="">Marca lo que quieras, sin miedo</option>
          <option value="correccion">Correcci√≥n ortotipogr√°fica</option>
          <option value="estilo">Correcci√≥n de estilo</option>
          <option value="ortoyestilo">Correcci√≥n ortotipogr√°fica + estilo</option>
          <option value="maquetacion">Maquetaci√≥n</option>
          <option value="dise√±o">Dise√±o de portada y contraportada</option>
          <option value="pack">Pack completo</option>
        </select>

        <label for="mensaje">Cu√©ntanos un poco m√°s sobre tu libro o lo que necesitas:</label>
        <textarea id="mensaje" name="mensaje" rows="6" required placeholder="No hace falta un testamento, pero s√≠ algo m√°s que ¬´quiero ayuda¬ª. ¬øG√©nero? ¬øExtensi√≥n? ¬øDudas? Lo que quieras contarnos"></textarea>

        <fieldset class="como-nos-conociste">
          <legend>¬øC√≥mo nos has conocido?</legend>
          <div class="radio-options">
            <label>
              <input type="radio" name="como_nos_conociste" value="recomendacion" required checked>
              Por una recomendaci√≥n
            </label>
            <label>
              <input type="radio" name="como_nos_conociste" value="instagram">
              Por Instagram
            </label>
            <label>
              <input type="radio" name="como_nos_conociste" value="google">
              Por una b√∫squeda en Google
            </label>
            <label>
              <input type="radio" name="como_nos_conociste" value="otro">
              Otro
            </label>
          </div>
        </fieldset>

        <div class="acepta-politica">
          <div style="margin-top: 2rem;">
            <label>
              <input type="checkbox" name="acepta_politica" required>
              He le√≠do y acepto la 
              <a href="/aviso-legal" target="_blank" style="color: #f2df05; text-decoration: underline;">
                pol√≠tica de privacidad
              </a>.
            </label>
          </div>
        </div>

        <button type="submit">Enviar</button>

        <p>
          <small><small>
            <strong>Informaci√≥n legal: </strong>Los datos proporcionados son incluidos autom√°ticamente en un fichero cuya titularidad 
            y responsabilidad corresponde a Editsandgo. Estos datos ser√°n tratados de forma totalmente confidencial, 
            siendo utilizados en exclusiva para realizar comunicaciones relacionadas con nuestros productos y servicios. 
            No obstante, puede ejercitar el derecho de cancelaci√≥n enviando un correo electr√≥nico a  
            <strong>editsandgo@gmail.com</strong>
          </small></small>
        </p>
      </form>
    </div>
  </section>

  <!-- JS para enviar el formulario y redirigir -->
  <script>
    const form = document.getElementById('contacto-form');

    form.addEventListener('submit', (e) => {
      e.preventDefault(); // evita la redirecci√≥n autom√°tica de Formsubmit
      const formData = new FormData(form);

      fetch(form.action, {
        method: form.method,
        body: formData,
        headers: { 'Accept': 'application/json' }
      })
      .then(response => {
        if (response.ok) {
          // Redirige a tu p√°gina de gracias
          window.location.href = '/gracias';
        } else {
          alert('Hubo un error al enviar el formulario. Intenta de nuevo.');
        }
      })
      .catch(() => alert('Hubo un error al enviar el formulario. Intenta de nuevo.'));
    });
  </script>
</BaseLayout>
